<!DOCTYPE html>
{% autoescape true %}
<html>
	<head>
		<style>
		table {
		    border-collapse: collapse;
		    width: 100%;
				max-width:1200px;
				min-width: 400px;
		}

		th, td {
		    padding: 8px;
		    text-align: left;
		    border-bottom: 1px solid #ddd;
		}

		tr:nth-child(odd) {background-color: #f2f2f2}
		

		</style>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script>
			$(function() {
			    $("td[colspan=3]").find("p").hide();
			    $("table").click(function(event) {
			        event.stopPropagation();
			        var $target = $(event.target);
			        if ( $target.closest("td").attr("colspan") > 1 ) {
			            $target.slideUp();
			        } else {
			            $target.closest("tr").next().find("p").slideToggle();
			        }                    
			    });
			});
		</script>
	</head>
  
	<body>
			<!-- [Questions] -->
      <form action="/" method="post">
        <textarea name="questions"  rows="10" cols ="100"
					autofocus 
					placeholder="Enter question(s). One per line.">{{questions}}</textarea>
				<div>
        <input type="submit" value="Get Answer(s)">
      </form>

      <!-- [Answers] -->
			<div style="overflow-x:auto;">
			<table>
			{% if answers %}
				{% set count = 0 %}
				<tr>
					<th>Question</th>
					{% for choice in answers[0].get("answers") %}
						{% set count = count + 1 %}
						<th>Answer {{count}}</th>
					{% endfor %}
				</tr>
			{% endif %}
      {% for answer in answers %}
        <tr>
					<td>{{answer.get("question")}}</td>
					{% for choice in answer.get("answers") %}
						{% if (choice.get("score") < 0.3) %}
							<td align="center">(minimum score not met: {{choice.get("score")}})</td>
						{% else %}
							<td>score: {{choice.get("score")}}. {{choice.get("answer")}}</td>
						{% endif %}						
					{% endfor %}
				</tr>
				<tr>
					<td colspan="3"><p>Blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah 
						blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
						 blah blah blah blah blah blah blah blah blah blah blah blah</p>
					</td>
				</tr>
			{% endfor %}
			</table>
			</div>
  </body>
</html>
{% endautoescape %}
